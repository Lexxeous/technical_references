<!-- JS Management -->

# <img src="../.pics/Lexxeous/lexx_headshot_clear.png" width="90px"/> Lexxeous's JS Management: <img src="../.pics/JS/js_logo.png" width="90px"/>

> "Every piece of information must have a single, unambiguous, authoritative representation within a system." -Andrew Hunt, The Pragmatic Programmer, 1999

> Visit [caniuse.com](https://caniuse.com) for compatibility information regarding different web browsers for JS versions (ES5, ES6, etc.), keywords (let, const, etc.), and concepts (modules).

### ES5 to ES6:

Three reasons for the ES5 to ES6 updates are listed below:

  1. 
		Readability and economy of code:
		The new syntax is often easier to understand (more readable) and requires fewer characters to create the same functionality (economy of code).
	2. 
		Addresses sources of ES5 bugs:
		Some ES5 syntax led to common bugs. With ES6, Ecma introduced syntax that mitigates some of the most common pitfalls.
	3. 
		A similarity to other programming languages:
		JavaScript ES6 is syntactically more similar to other object-oriented programming languages.
		This leads to less friction when experienced, non-JavaScript developers want to learn JavaScript.
	
Because ES6 addressed the above issues, Ecma knew that adoption by web developers would occur quickly, while web browser support lagged behind.

To limit the impact of ES6 browser compatibility issues, Ecma made the new syntax backwards compatible, which means you can map JavaScript ES6 code to ES5.

Although the majority ES6 is supported for web browsers now, you can still use a Node package called "babel" that supports conversion between ES6 and ES5.

### NodeJS:

Use `npm init` to initialize Node Package Manager requirements by creating an appropriate `package.json` file.
Ensure that your `package.json` file has a "build" script.

> You can use the *Babel* **JS** package to create and convert **JS** files into forward and backward compatible versions.

```js
"scripts": {
  "build": "babel src -d lib" // <babel_cmd> <source> <dest> ; the "-d" flag to designate that all of the source files will be written to one directory
 }
```

You should also have a local ".babelrc" file that looks like:

```js
{
 	"presets": ["env"]
}
```
so that "babel" understands what version of JS you want to convert from (most commonly ES6 and ES6+).

Then, by running:
	```sh
	npm install babel-cli -D # the "-D" flag adds the package to the list of "devDependencies" in the local "package.json" file automatically
	npm install babel-present-env -D
	npm build
	```
All of the source files contained in the "src" directory will be duplicated, converted to ES5 syntax, and stored in the "lib" directory.


### Acronymns:

AJAX = Asyncronous JavaScript and XML
XML = eXtensible Markup Language
XHR = XML HTTP Request
JSON = JavaScript Object Notation
XSS = Cross-Site Scripting



### XSS Attacks:

1. Do not allow untrusted users to submit HTML markup or JS.
2. Double-check validation on the server before displaying user content or storing it on the database ; users could bypass validation by turning off JS.
3. The database may contain safe markup and script from trusted sources ; doesnt process the code, just simply stores it.
4. As your data leaves the database, all potentially dangerous characters should be escaped.
5. Only insert content generated by users into certain parts of the template files.
6. Don't create DOM fragments containing HTML from untrusted sources. It sould only be added as text once it has been escaped.



### XSS Escaping and Controlling Markup:

  1. NEVER include data from untrusted/external sources in JS. This involves escaping all ASCII chars less than 256 (that arent alphanumeric). Ex:

```txt
	
		& -> &amp;
		< -> &lt;
		> -> &gt;
		` -> &#x60;
		' -> &#x27; (not &apos;)
		" -> &quot;
		/ -> &#x2F;
```

  2. For JS:
		DO use "textContent" or "innerText"
		DO NOT use "innerHTML"
  3. For jQuery:
		DO use .text()
		DO NOT use .html()


### 6 Rules/Guidelines for Naming Variables in JS:

1. Must begin with a letter, dollar signs (`$`), or underscores (`_`); must not begin with a number
2. Must not contain dashes (`-`) or periods (`.`)
3. Must not be the same as a keyword reserved for **JS** ; can have a keyword as part of the variable name
4. Variable names are case sensitive
5. Use names that are descriptive of their value
6. Use camel casing or underscores (`_`) to seperate each word within the variable name



### Document Object Model (DOM):

  * The topmost object in the DOM is the 'document' object
  * The next object is the html source
  * The next object is the source body element
  * NodeLists that are returned via queries are similar to arrays (0 indexed) but are called collections
   - Live NodeList: When your script updates the page, the NodeList is updated at the same time, reflecting the changes
   - Static NodeList The NodeList is not updated to reflect the changes made by the script


### Misc.

  * JS listener ID's must be unique to take action

  * When attempting to access elements outside of the bounds of an array, JS does not return a segmentation fault, it simply returns "undefined".

  * Use JS to RAMP the user web experience
	 - React to events triggered by the user or browser
	 - Access the content on the page
	 - Modify the content on the page
	 - Program rules or instructions for the browser to follow

  * Minification = removes all unecessary whitespace from a file and is denoted as: file.min.js

  * jQuery doesnt achieve anything that cant be done with vanilla JS, just makes coding simpler; "Write less, do more."


Local, session, and cookies data cannot be cross referenced/accessed unless all parts of the URL match:

1. http:// 		; Protocol
2. www.				; Sub-domain
3. google.com ; Domain
4. :3000			; Port

  * HTML is the base layer, the content layer ; give basic information
  * CSS is the middle layer, the presentation layer ; gives styling to the information
  * JS is the top layer, the behavior layer ; enhances the interactive experience of the page



> For some more detailed information, specifications, and browser compatability, visit: [the Mozilla documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar) 




